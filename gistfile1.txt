<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯æ„›é¢¨æ ¼ä¸­è‹±ç¿»è½‰å–®å­—å¡:å®Œæ•´ç‰ˆ</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- è¼‰å…¥ Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- è¼‰å…¥ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* è¨­å®šè‡ªè¨‚å­—é«”å’Œå¯æ„›é¢¨æ ¼æ¨£å¼ */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            /* æ•´é«”å¤§èƒŒæ™¯ï¼šæŸ”å’Œçš„æ¼¸å±¤ */
            background: linear-gradient(135deg, #fce7f3 0%, #e9d5ff 100%);
        }
        .card-container {
            width: 100%;
            max-width: 480px;
        }

        /* 1. è¨­ç½® 3D ç¿»è½‰æ•ˆæœçš„å®¹å™¨ */
        .card {
            height: 350px;
            box-shadow: 0 8px 0 #F8BBD0, 0 15px 30px rgba(0, 0, 0, 0.15);
            border: 3px solid #FBCFE8;
            border-radius: 2rem;
            background-color: transparent;
            perspective: 1000px;
            padding: 0;
        }

        /* 2. å¡ç‰‡å…§å±¤ï¼šé€²è¡Œç¿»è½‰çš„å…ƒç´  */
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1); /* åŠ å…¥è²èŒ²æ›²ç·šè®“ç¿»è½‰æ›´ç”Ÿå‹• */
            transform-style: preserve-3d;
        }

        /* ç¿»è½‰ç‹€æ…‹ */
        .card.is-flipped .card-inner {
            transform: rotateY(180deg);
        }

        /* 3. å¡ç‰‡æ­£åé¢å…±åŒæ¨£å¼ */
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* éš±è—æœªç¿»è½‰é‚£ä¸€é¢ */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 1.75rem;
            padding: 1.5rem;
            color: #4C1D95;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤æ‰‹æ©Ÿé»æ“Šæ™‚çš„é«˜äº®è—æ¡† */
        }

        .card-face p {
            white-space: pre-wrap;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        /* 4. æ­£é¢ï¼ˆè‹±æ–‡ï¼‰æ¨£å¼ */
        .card-front {
            background-color: #FFFFFF;
            z-index: 2;
        }
 
        /* 5. èƒŒé¢ï¼ˆä¸­æ–‡ï¼‰æ¨£å¼ - è—è‰²èƒŒæ™¯ */
        .card-back {
            transform: rotateY(180deg);
            background-color: #BBDEFB;
            color: #1e3a8a;
        }

        /* å­—é«”å¤§å°è¨­å®š */
        .card-text-jumbo {
            font-size: 8rem; /* å­—æ¯å¡è¶…å¤§å­—é«” */
            line-height: 1;
            font-weight: 800;
            color: #db2777;
        }
        @media (min-width: 640px) {
            .card-text-jumbo { font-size: 10rem; }
        }

        .card-text-normal {
             font-size: 3rem; /* ä¸€èˆ¬å–®å­—å¡å­—é«” */
             line-height: 1.2;
             font-weight: 800;
        }
        @media (min-width: 640px) {
            .card-text-normal { font-size: 3.5rem; }
        }

        /* æ–°å¢ï¼šçŸ­å¥å­—é«” (ä»‹æ–¼å–®å­—èˆ‡é•·å¥ä¹‹é–“ï¼Œé©ç”¨æ–¼ç¬¬13é ) */
        .card-text-phrase {
             font-size: 2rem;
             line-height: 1.3;
             font-weight: 700;
        }
        @media (min-width: 640px) {
            .card-text-phrase { font-size: 2.4rem; }
        }

        .card-text-sentence {
             font-size: 1.5rem; /* é•·å¥å­—é«” */
             line-height: 1.4;
             font-weight: 700;
        }
        @media (min-width: 640px) {
            .card-text-sentence { font-size: 1.75rem; }
        }

        /* æŒ‰éˆ•åŸºç¤æ¨£å¼ - ä¿®æ”¹ç‚ºæ›´ç«‹é«”çš„é¢¨æ ¼ */
        .btn {
            @apply px-4 py-3 font-extrabold rounded-2xl transition-all duration-150 transform flex items-center justify-center text-sm md:text-base select-none relative overflow-hidden;
        }
        
        .btn:active:not(:disabled) {
             transform: translateY(4px) !important; /* æŒ‰ä¸‹æ™‚å¾€ä¸‹æ²‰ */
             box-shadow: none !important; /* æŒ‰ä¸‹æ™‚é™°å½±æ¶ˆå¤± */
        }

        /* è¼”åŠ©æŒ‰éˆ• (ç°è‰²ç³»/ç´«è‰²ç³») */
        .btn-secondary {
            @apply bg-white text-purple-700 border-2 border-purple-300;
            box-shadow: 0 4px 0 #d8b4fe; /* ç¡¬é™°å½± */
        }

        /* --- ç‰¹è£½æŒ‰éˆ•æ¨£å¼é–‹å§‹ --- */
        
        /* æœ—è®€æŒ‰éˆ•ï¼šè—ç¶ è‰² + é»é»èƒŒæ™¯åœ– */
        .btn-audio {
            background-color: #2dd4bf; /* teal-400 åº•è‰² */
            background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.3) 1px, transparent 0);
            background-size: 10px 10px;
            color: white;
            border: 2px solid #0d9488; /* teal-600 æ·±è‰²é‚Šæ¡† */
            box-shadow: 0 4px 0 #0f766e; /* teal-700 ç¡¬é™°å½± */
        }
        /* ç¿»è½‰æŒ‰éˆ•ï¼šç²‰ç´…è‰² + æ–œç·šèƒŒæ™¯åœ– */
        .btn-flip {
            background-color: #f472b6; /* pink-400 åº•è‰² */
            background-image: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2) 10px, transparent 10px, transparent 20px);
            color: white;
            border: 2px solid #db2777; /* pink-600 æ·±è‰²é‚Šæ¡† */
            box-shadow: 0 4px 0 #be185d; /* pink-700 ç¡¬é™°å½± */
        }
        /* A-Z æœ—è®€æŒ‰éˆ• (é»ƒè‰²) */
        .btn-yellow {
             @apply bg-yellow-400 text-yellow-900 border-2 border-yellow-600;
             box-shadow: 0 4px 0 #ca8a04;
        }
        /* A-Z åœæ­¢æŒ‰éˆ• (ç´…è‰²) */
        .btn-red {
            @apply bg-red-400 text-white border-2 border-red-600;
            box-shadow: 0 4px 0 #b91c1c;
        }

        /* --- ç‰¹è£½æŒ‰éˆ•æ¨£å¼çµæŸ --- */

        /* ç¦ç”¨ç‹€æ…‹ */
        .btn:disabled {
            @apply opacity-50 cursor-not-allowed transform-none !important;
            box-shadow: none !important;
            background-image: none !important; /* ç¦ç”¨æ™‚ç§»é™¤èƒŒæ™¯åœ– */
            background-color: #e5e7eb !important;
            color: #9ca3af !important;
            border-color: #d1d5db !important;
        }

        /* ä¾‹å¥ç”Ÿæˆå€å¡Š */
        /* .gemini-box {
            border: 3px dashed #c4b5fd;
            background-color: #f3e8ff;
            border-radius: 1.5rem;
        } */

        /* å°è¦½ç®­é ­ */
        .arrow-btn {
            @apply bg-white/70 text-purple-600 rounded-full p-1 sm:p-2 backdrop-blur-md shadow-lg border-2 border-white/50 transition-all duration-200 active:scale-90 disabled:opacity-30 disabled:cursor-not-allowed;
        }
        @media (hover: hover) {
             .arrow-btn:hover { @apply bg-white scale-110; }
        }

        /* ä¸‹æ‹‰é¸å–®æ¨£å¼å„ªåŒ– */
        #pageDropdownContent {
             max-height: 60vh;
             scrollbar-width: thin;
             scrollbar-color: #d8b4fe #f3e8ff;
        }
        #pageDropdownContent::-webkit-scrollbar { width: 8px; }
        #pageDropdownContent::-webkit-scrollbar-track { background: #f3e8ff; border-radius: 10px; }
        #pageDropdownContent::-webkit-scrollbar-thumb { background-color: #d8b4fe; border-radius: 10px; border: 2px solid #f3e8ff; }

        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="card-container flex flex-col items-center">
        <!-- æ¨™é¡Œå€å¡Š -->
        <div class="w-full pt-4 mb-6">
            <h1 class="text-center text-2xl md:text-3xl font-black text-purple-800 tracking-tight mb-1 drop-shadow-sm">
                å±æ±ç¸£ç¤¾çš®åœ‹å°<br class="sm:hidden">è‹±èªå­¸ç¿’è­·ç…§
            </h1>
            <!-- ç·¨è€…è³‡è¨Š -->
            <div class="flex justify-end mt-1">
                <div class="inline-block bg-pink-100 text-pink-800 text-sm px-3 py-1 rounded-full font-bold mr-1">
                    Alice å¼µé›…ç‡•è€å¸«ç·¨è£½
                </div>
            </div>
        </div>

        <!-- é é¢é¸æ“‡å€å¡Š -->
        <div class="w-full relative mb-6 z-30">
             <button id="pageDropdownButton" type="button"
                    class="w-full flex justify-between items-center px-4 py-3 text-lg font-bold text-purple-800 bg-white border-4 border-purple-200 rounded-2xl shadow-sm active:bg-purple-50 transition-colors">
                <span id="selectedPageText" class="truncate mr-2">
                    <i data-lucide="book-open" class="inline-block w-5 h-5 mr-1 -mt-1 text-purple-500"></i>
                    Page 1: çå‹µè¾¦æ³•
                </span>
                <i data-lucide="chevron-down" id="dropdownArrow" class="w-6 h-6 text-purple-400 transition-transform duration-300"></i>
            </button>

            <!-- ä¸‹æ‹‰é¸å–®å…§å®¹ -->
            <div id="pageDropdownContent" class="absolute w-full mt-2 bg-white border-4 border-purple-200 rounded-2xl shadow-xl hidden overflow-y-auto z-40">
                <div class="py-2" id="dropdownList">
                    <!-- JS å°‡åœ¨æ­¤å¡«å……é¸é … -->
                </div>
            </div>
             <!-- é»æ“Šå¤–éƒ¨é—œé–‰é¸å–®ç”¨çš„é®ç½© -->
            <div id="dropdownOverlay" class="fixed inset-0 z-20 hidden"></div>
        </div>

        <!-- å–®å­—å¡èˆ‡å°è¦½ç®­é ­å®¹å™¨ -->
        <div class="w-full relative flex justify-center items-center mb-6 md:mb-8">
            <!-- ä¸Šä¸€å¼µ (ä¿®æ­£å®šä½ï¼štop-1/2 -translate-y-1/2 ç¢ºä¿å‚ç›´ç½®ä¸­ï¼Œä¸¦èª¿æ•´æ°´å¹³ä½ç§») -->
            <button id="card-prev-button" class="arrow-btn absolute left-0 z-20 top-1/2 -translate-y-1/2 -translate-x-6 md:-translate-x-12" aria-label="Previous Card">
                <i data-lucide="chevron-left" class="w-8 h-8 md:w-10 md:h-10"></i>
            </button>

            <!-- å–®å­—å¡ -->
            <div id="flashcard" class="card w-full max-w-sm md:max-w-full mx-auto">
                <div id="card-inner" class="card-inner">
                    <!-- æ­£é¢ (è‹±æ–‡) -->
                    <div class="card-face card-front">
                        <p id="english-text" class="card-text-normal text-center break-words max-w-full">Loading...</p>
                    </div>
                    <!-- èƒŒé¢ (ä¸­æ–‡) -->
                    <div class="card-face card-back">
                        <p id="chinese-text" class="card-text-normal font-bold text-center break-words max-w-full">è¼‰å…¥ä¸­...</p>
                    </div>
                </div>
            </div>

            <!-- ä¸‹ä¸€å¼µ (ä¿®æ­£å®šä½ï¼štop-1/2 -translate-y-1/2 ç¢ºä¿å‚ç›´ç½®ä¸­ï¼Œä¸¦ä¿®æ­£æ°´å¹³ä½ç§»æ–¹å‘) -->
            <button id="card-next-button" class="arrow-btn absolute right-0 z-20 top-1/2 -translate-y-1/2 translate-x-6 md:translate-x-12" aria-label="Next Card">
                <i data-lucide="chevron-right" class="w-8 h-8 md:w-10 md:h-10"></i>
            </button>
        </div>

        <!-- æ§åˆ¶æŒ‰éˆ•å€ (åŠ å…¥ ID ä»¥ä¾¿åœ¨ A-Z é é¢æ§åˆ¶ä½ˆå±€) -->
        <div id="std-control-grid" class="grid grid-cols-2 gap-4 md:gap-5 mb-6 w-full max-w-sm md:max-w-full mx-auto px-1 transition-all duration-300">
            <button id="speak-btn" class="btn btn-audio">
                <i data-lucide="volume-2" class="w-6 h-6 mr-2"></i>
                <span class="text-lg">æœ—è®€å–®å­—</span>
            </button>
            <button id="flip-btn" class="btn btn-flip">
                <i data-lucide="rotate-3d" class="w-6 h-6 mr-2"></i>
                <span class="text-lg">ç¿»è½‰å¡ç‰‡</span>
            </button>
        </div>

        <!-- å­—æ¯æœ—è®€æ§åˆ¶å€ (åƒ…åœ¨ Page 4 é¡¯ç¤º) -->
        <div id="alphabet-btn-container" class="w-full mb-6 hidden fade-in px-1">
            <!-- é–‹å§‹æŒ‰éˆ• -->
            <button id="alphabet-start-btn" class="btn btn-yellow w-full">
                <i data-lucide="play" class="w-5 h-5 mr-2"></i>
                æœ—è®€ A-Z å­—æ¯
            </button>
            <!-- æ’­æ”¾ä¸­æ§åˆ¶é … (åˆå§‹éš±è—) -->
            <div id="alphabet-controls" class="hidden w-full flex space-x-3">
                <button id="alphabet-pause-btn" class="btn btn-yellow flex-1">
                    <i data-lucide="pause" class="w-5 h-5 mr-2"></i>
                    <span id="pause-btn-text">æš«åœ</span>
                </button>
                <button id="alphabet-stop-btn" class="btn btn-red flex-none px-4" aria-label="åœæ­¢">
                    <i data-lucide="square" class="w-5 h-5"></i>
                </button>
            </div>
        </div>

        <!-- AI ä¾‹å¥å€å¡Š (ä½¿ç”¨æœ¬åœ°æ¨¡æ¿) -->
        <div style="font-family:sans-serif; width: 100%; max-w-sm md:max-w-full; margin-bottom: 2rem; padding: 0 4px;">
            <button id="ai-sentence-btn" class="btn btn-secondary w-full bg-white">
                <i data-lucide="wand-2" class="w-4 h-4 mr-2"></i>
                AI é€ å¥
            </button>
            <p id="sentenceBox" class="text-center" style="margin-top:10px; font-size:16px; md:font-size:18px; color:#333; min-height: 60px; background: #f3e8ff; border: 3px dashed #c4b5fd; border-radius: 1.5rem; padding: 12px; display: flex; align-items: center; justify-content: center;">
                <!-- JS æœƒå¡«å…¥ä¾‹å¥ -->
            </p>
        </div>


    </div>

    <script>
        // åˆå§‹åŒ– Lucide åœ–æ¨™
        lucide.createIcons();

        // =========================================
        // 1. å®Œæ•´å–®å­—è³‡æ–™åº« (Page 1 - 39)
        // =========================================
        const flashcards = [
            // Page 1-3: èªªæ˜é 
            { en: "è‹±èªå­¸ç¿’è­·ç…§", zh: "è‹±èªå­¸ç¿’è­·ç…§\n(çå‹µè¾¦æ³•)", page: 1, topic: "çå‹µè¾¦æ³•", noTts: true, noGemini: true },
            { en: "Welcome!", zh: "ç·¨è€…çš„è©± (ä¸€)ï¼š\n\næ­¡è¿ä½¿ç”¨ï¼è«‹é»æ“Šä¸Šæ–¹é¸å–®\né¸æ“‡ Page 4 é–‹å§‹å­¸ç¿’ã€‚", page: 2, topic: "ç·¨è€…çš„è©±", noTts: true, noGemini: true },
            { en: "Let's Go!", zh: "ç·¨è€…çš„è©± (äºŒ)ï¼š\n\næº–å‚™å¥½äº†å—ï¼Ÿ\nè®“æˆ‘å€‘é–‹å§‹å­¸ç¿’å§ï¼", page: 3, topic: "ç·¨è€…çš„è©±", noTts: true, noGemini: true },
            // Page 4: A-Z Review
            { en: "A to Z", zh: "å­—æ¯ A åˆ° Z ç¸½è¤‡ç¿’", page: 4, topic: "å­—æ¯ç¸½è¦½", isAlphabetReview: true, noGemini: true, noTts: true },
            // Page 5-12: Letters
            { en: "A", tts_en: "A", zh: "a", page: 5, topic: "å­—æ¯ A-D", isLetter: true, noGemini: true },
            { en: "B", tts_en: "B", zh: "b", page: 5, topic: "å­—æ¯ A-D", isLetter: true, noGemini: true },
            { en: "C", tts_en: "C", zh: "c", page: 5, topic: "å­—æ¯ A-D", isLetter: true, noGemini: true },
            { en: "D", tts_en: "D", zh: "d", page: 5, topic: "å­—æ¯ A-D", isLetter: true, noGemini: true },
            { en: "E", tts_en: "E", zh: "e", page: 6, topic: "å­—æ¯ E-H", isLetter: true, noGemini: true },
            { en: "F", tts_en: "F", zh: "f", page: 6, topic: "å­—æ¯ E-H", isLetter: true, noGemini: true },
            { en: "G", tts_en: "G", zh: "g", page: 6, topic: "å­—æ¯ E-H", isLetter: true, noGemini: true },
            { en: "H", tts_en: "H", zh: "h", page: 6, topic: "å­—æ¯ E-H", isLetter: true, noGemini: true },
            { en: "I", tts_en: "I", zh: "i", page: 7, topic: "å­—æ¯ I-K", isLetter: true, noGemini: true },
            { en: "J", tts_en: "J", zh: "j", page: 7, topic: "å­—æ¯ I-K", isLetter: true, noGemini: true },
            { en: "K", tts_en: "K", zh: "k", page: 7, topic: "å­—æ¯ I-K", isLetter: true, noGemini: true },
            { en: "L", tts_en: "L", zh: "l", page: 8, topic: "å­—æ¯ L-N", isLetter: true, noGemini: true },
            { en: "M", tts_en: "M", zh: "m", page: 8, topic: "å­—æ¯ L-N", isLetter: true, noGemini: true },
            { en: "N", tts_en: "N", zh: "n", page: 8, topic: "å­—æ¯ L-N", isLetter: true, noGemini: true },
            { en: "O", tts_en: "O", zh: "o", page: 9, topic: "å­—æ¯ O-Q", isLetter: true, noGemini: true },
            { en: "P", tts_en: "P", zh: "p", page: 9, topic: "å­—æ¯ O-Q", isLetter: true, noGemini: true },
            { en: "Q", tts_en: "Q", zh: "q", page: 9, topic: "å­—æ¯ O-Q", isLetter: true, noGemini: true },
            { en: "R", tts_en: "R", zh: "r", page: 10, topic: "å­—æ¯ R-T", isLetter: true, noGemini: true },
            { en: "S", tts_en: "S", zh: "s", page: 10, topic: "å­—æ¯ R-T", isLetter: true, noGemini: true },
            { en: "T", tts_en: "T", zh: "t", page: 10, topic: "å­—æ¯ R-T", isLetter: true, noGemini: true },
            { en: "U", tts_en: "U", zh: "u", page: 11, topic: "å­—æ¯ U-W", isLetter: true, noGemini: true },
            { en: "V", tts_en: "V", zh: "v", page: 11, topic: "å­—æ¯ U-W", isLetter: true, noGemini: true },
            { en: "W", tts_en: "W", zh: "w", page: 11, topic: "å­—æ¯ U-W", isLetter: true, noGemini: true },
            { en: "X", tts_en: "X", zh: "x", page: 12, topic: "å­—æ¯ X-Z", isLetter: true, noGemini: true },
            { en: "Y", tts_en: "Y", zh: "y", page: 12, topic: "å­—æ¯ X-Z", isLetter: true, noGemini: true },
            { en: "Z", tts_en: "Z", zh: "z", page: 12, topic: "å­—æ¯ X-Z", isLetter: true, noGemini: true },
            // Page 13: Daily Phrases
            { en: "Good morning.", zh: "æ—©å®‰ã€‚", page: 13, topic: "å•å€™èª", isPhrase: true },
            { en: "Good afternoon.", zh: "ä¸‹åˆå¥½ã€‚", page: 13, topic: "å•å€™èª", isPhrase: true },
            { en: "How are you? \nI am fine.", zh: "ä½ å¥½å—ï¼Ÿ\næˆ‘å¾ˆå¥½ã€‚", page: 13, topic: "å•å€™èª", isPhrase: true },
            { en: "Stand up.", zh: "ç«™èµ·ä¾†ã€‚", page: 13, topic: "å•å€™èª", isPhrase: true },
            { en: "Sit down.", zh: "åä¸‹ã€‚", page: 13, topic: "å•å€™èª", isPhrase: true },
            { en: "Listen!", zh: "è½ï¼", page: 13, topic: "å•å€™èª", isPhrase: true },
            { en: "Look!", zh: "çœ‹ï¼", page: 13, topic: "å•å€™èª", isPhrase: true },
            { en: "Thank you.", zh: "è¬è¬ä½ ã€‚", page: 13, topic: "å•å€™èª", isPhrase: true },
            { en: "You are welcome.", zh: "ä¸å®¢æ°£ã€‚", page: 13, topic: "å•å€™èª", isPhrase: true },
            // Page 14: Family
            { en: "father", zh: "çˆ¶è¦ª", page: 14, topic: "å®¶äºº" },
            { en: "mother", zh: "æ¯è¦ª", page: 14, topic: "å®¶äºº" },
            { en: "dad", zh: "çˆ¸çˆ¸", page: 14, topic: "å®¶äºº" },
            { en: "mom", zh: "åª½åª½", page: 14, topic: "å®¶äºº" },
            { en: "grandfather", zh: "ç¥–çˆ¶ / å¤–ç¥–çˆ¶", page: 14, topic: "å®¶äºº" },
            { en: "grandmother", zh: "ç¥–æ¯ / å¤–ç¥–æ¯", page: 14, topic: "å®¶äºº" },
            { en: "grandpa", zh: "çˆºçˆº / å…¬å…¬", page: 14, topic: "å®¶äºº" },
            { en: "grandma", zh: "å¥¶å¥¶ / å©†å©†", page: 14, topic: "å®¶äºº" },
            { en: "brother", zh: "å“¥å“¥ / å¼Ÿå¼Ÿ", page: 14, topic: "å®¶äºº" },
            { en: "sister", zh: "å§Šå§Š / å¦¹å¦¹", page: 14, topic: "å®¶äºº" },
            // Page 15: School Supplies I (Updated)
            { en: "book", zh: "æ›¸", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" },
            { en: "school bag", zh: "æ›¸åŒ…", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" },
            { en: "chair", zh: "æ¤…å­", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" },
            { en: "computer", zh: "é›»è…¦", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" }, // Moved from P16
            { en: "desk", zh: "æ›¸æ¡Œ", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" },
            { en: "eraser", zh: "æ©¡çš®æ“¦", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" },
            { en: "marker", zh: "éº¥å…‹ç­†", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" },
            { en: "notebook", zh: "ç­†è¨˜æœ¬", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" }, // New item
            { en: "pen", zh: "åŸå­ç­†", page: 15, topic: "å­¸ç”¨å“ (ä¸€)" },
            // Page 16: School Supplies II & People (Updated)
            { en: "pencil", zh: "é‰›ç­†", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" }, 
            { en: "pencil box", zh: "é‰›ç­†ç›’", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" },
            { en: "ruler", zh: "å°º", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" },
            { en: "girl", zh: "å¥³å­©", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" },
            { en: "boy", zh: "ç”·å­©", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" },
            { en: "student", zh: "å­¸ç”Ÿ", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" },
            { en: "classmate", zh: "åŒå­¸", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" }, // New item
            { en: "friend", zh: "æœ‹å‹", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" },
            { en: "Mr.", zh: "å…ˆç”Ÿ", page: 16, topic: "å­¸ç”¨å“ (äºŒ) èˆ‡äººç‰©" }, // New item
            // teacher removed from P16
            // Page 17: Sentence Patterns 1 (Updated)
            { en: "What's your name? \nMy name is David.", zh: "ä½ å«ä»€éº¼åå­—ï¼Ÿ\næˆ‘çš„åå­—æ˜¯å¤§è¡›ã€‚", page: 17, topic: "å¥å‹1", isPhrase: true },
            { en: "How are you? \nI'm fine. Thank you.", zh: "ä½ å¥½å—ï¼Ÿ\næˆ‘å¾ˆå¥½ã€‚è¬è¬ä½ ã€‚", page: 17, topic: "å¥å‹1", isPhrase: true },
            { en: "Where is the cat? \nIt's on the box.", zh: "è²“åœ¨å“ªè£¡ï¼Ÿ\nç‰ åœ¨ç®±å­ä¸Šé¢ã€‚", page: 17, topic: "å¥å‹1", isPhrase: true },
            { en: "I like bananas. \nI don't like oranges.", zh: "æˆ‘å–œæ­¡é¦™è•‰ã€‚\næˆ‘ä¸å–œæ­¡æŸ³æ©™ã€‚", page: 17, topic: "å¥å‹1", isPhrase: true },
            { en: "Are you a student? \nYes, I am. \nNo, I'm not.", zh: "ä½ æ˜¯ä¸€ä½å­¸ç”Ÿå—ï¼Ÿ\næ˜¯çš„ï¼Œæˆ‘æ˜¯ã€‚\nä¸ï¼Œæˆ‘ä¸æ˜¯ã€‚", page: 17, topic: "å¥å‹1", isPhrase: true },
            // Page 18: Rhymes (Updated)
            { en: "I am a girl.", zh: "æˆ‘æ˜¯ä¸€å€‹å¥³å­©ã€‚", page: 18, topic: "éŸ»æ–‡", isPhrase: true },
            { en: "There are five people in my family.", zh: "æˆ‘å®¶æœ‰äº”å€‹äººã€‚", page: 18, topic: "éŸ»æ–‡", isPhrase: true },
            { en: "Every morning, I take my school bag to school.", zh: "æ¯å¤©æ—©ä¸Šï¼Œæˆ‘å¸¶è‘—æ›¸åŒ…å»å­¸æ ¡ã€‚", page: 18, topic: "éŸ»æ–‡", isPhrase: true },
            { en: "In my school bag, there is a pencil case.", zh: "æˆ‘çš„æ›¸åŒ…è£¡æœ‰ä¸€å€‹é‰›ç­†ç›’ã€‚", page: 18, topic: "éŸ»æ–‡", isPhrase: true },
            { en: "I like to go to school.", zh: "æˆ‘å–œæ­¡å»å­¸æ ¡ã€‚", page: 18, topic: "éŸ»æ–‡", isPhrase: true },
            // Page 19: Body Parts (Updated)
            { en: "arm", zh: "æ‰‹è‡‚", page: 19, topic: "èº«é«”éƒ¨ä½" },
            { en: "ear", zh: "è€³æœµ", page: 19, topic: "èº«é«”éƒ¨ä½" },
            { en: "eye", zh: "çœ¼ç›", page: 19, topic: "èº«é«”éƒ¨ä½" },
            { en: "feet", zh: "é›™è…³", page: 19, topic: "èº«é«”éƒ¨ä½" },
            { en: "foot", zh: "è…³", page: 19, topic: "èº«é«”éƒ¨ä½" },
            { en: "hair", zh: "é ­é«®", page: 19, topic: "èº«é«”éƒ¨ä½" },
            { en: "hand", zh: "æ‰‹", page: 19, topic: "èº«é«”éƒ¨ä½" },
            { en: "head", zh: "é ­", page: 19, topic: "èº«é«”éƒ¨ä½" },
            // Page 20 (Body Parts II) - MODIFIED
            { en: "leg", zh: "è…¿", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            { en: "mouth", zh: "å˜´", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            { en: "nose", zh: "é¼»", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            // Added 6 food items to Page 20
            { en: "apple", zh: "è˜‹æœ", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            { en: "banana", zh: "é¦™è•‰", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            { en: "bread", zh: "éºµåŒ…", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            { en: "cake", zh: "è›‹ç³•", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            { en: "egg", zh: "è›‹", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            { en: "hamburger", zh: "æ¼¢å ¡", page: 20, topic: "èº«é«”éƒ¨ä½ (äºŒ) & é£Ÿç‰© (ä¸€)" },
            
            // Page 21 (Food) - UPDATED
            { en: "hot dog", zh: "ç†±ç‹—", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            { en: "ice cream", zh: "å†°æ·‡æ·‹", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            { en: "juice", zh: "æœæ±", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            { en: "milk", zh: "ç‰›å¥¶", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            { en: "pizza", zh: "æŠ«è–©", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            { en: "sandwich", zh: "ä¸‰æ˜æ²»", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            { en: "soup", zh: "æ¹¯", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            { en: "tea", zh: "èŒ¶", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            { en: "water", zh: "æ°´", page: 21, topic: "é£Ÿç‰© (äºŒ)" },
            
            // Page 22: UPDATED
            { en: "breakfast", zh: "æ—©é¤", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },
            { en: "dinner", zh: "æ™šé¤", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },
            { en: "lunch", zh: "åˆé¤", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },
            { en: "animal", zh: "å‹•ç‰©", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },
            { en: "bear", zh: "ç†Š", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },
            { en: "bird", zh: "é³¥", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },
            { en: "cat", zh: "è²“", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },
            { en: "chicken", zh: "é›", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },
            { en: "dog", zh: "ç‹—", page: 22, topic: "ä¸‰é¤&å‹•ç‰©" },

            // Page 23: UPDATED
            { en: "elephant", zh: "è±¡", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            { en: "fish", zh: "é­š", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            { en: "lion", zh: "ç…å­", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            { en: "monkey", zh: "çŒ´å­", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            { en: "pig", zh: "è±¬", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            { en: "rabbit", zh: "å…”", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            { en: "snake", zh: "è›‡", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            { en: "tiger", zh: "è€è™", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            { en: "zoo", zh: "å‹•ç‰©åœ’", page: 23, topic: "å‹•ç‰© (äºŒ)" },
            
             // Page 24: Numbers (UPDATED)
            { en: "one", zh: "ä¸€", page: 24, topic: "æ•¸å­—" },
            { en: "two", zh: "äºŒ", page: 24, topic: "æ•¸å­—" },
            { en: "three", zh: "ä¸‰", page: 24, topic: "æ•¸å­—" },
            { en: "four", zh: "å››", page: 24, topic: "æ•¸å­—" },
            { en: "five", zh: "äº”", page: 24, topic: "æ•¸å­—" },
            { en: "six", zh: "å…­", page: 24, topic: "æ•¸å­—" },
            { en: "seven", zh: "ä¸ƒ", page: 24, topic: "æ•¸å­—" },
            { en: "eight", zh: "å…«", page: 24, topic: "æ•¸å­—" },
            { en: "nine", zh: "ä¹", page: 24, topic: "æ•¸å­—" },
            
            // Page 25: UPDATED (was Page 26: Colors)
            { en: "ten", zh: "å", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },
            { en: "eleven", zh: "åä¸€", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },
            { en: "twelve", zh: "åäºŒ", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },
            { en: "zero", zh: "é›¶", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },
            { en: "bathroom", zh: "æµ´å®¤", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },
            { en: "bedroom", zh: "è‡¥æˆ¿", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },
            { en: "bookstore", zh: "æ›¸åº—", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },
            { en: "classroom", zh: "æ•™å®¤", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },
            { en: "home", zh: "å®¶", page: 25, topic: "æ•¸å­—èˆ‡åœ°æ–¹" },

            // Page 26: UPDATED (was Colors / Places)
            { en: "kitchen", zh: "å»šæˆ¿", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },
            { en: "library", zh: "åœ–æ›¸é¤¨", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },
            { en: "living room", zh: "å®¢å»³", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },
            { en: "park", zh: "å…¬åœ’", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },
            { en: "school", zh: "å­¸æ ¡", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },
            { en: "store", zh: "å•†åº—", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },
            { en: "supermarket", zh: "è¶…ç´šå¸‚å ´", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },
            { en: "black", zh: "é»‘è‰²çš„", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },
            { en: "blue", zh: "è—è‰²çš„", page: 26, topic: "åœ°æ–¹èˆ‡é¡è‰²" },

            // Page 27: UPDATED (was Clothes)
            { en: "brown", zh: "æ£•è‰²çš„", page: 27, topic: "é¡è‰²" },
            { en: "color", zh: "é¡è‰²", page: 27, topic: "é¡è‰²" },
            { en: "green", zh: "ç¶ è‰²çš„", page: 27, topic: "é¡è‰²" },
            { en: "orange", zh: "æ©™è‰²çš„", page: 27, topic: "é¡è‰²" },
            { en: "pink", zh: "ç²‰ç´…è‰²çš„", page: 27, topic: "é¡è‰²" },
            { en: "purple", zh: "ç´«è‰²çš„", page: 27, topic: "é¡è‰²" },
            { en: "red", zh: "ç´…è‰²çš„", page: 27, topic: "é¡è‰²" },
            { en: "white", zh: "ç™½è‰²çš„", page: 27, topic: "é¡è‰²" },
            { en: "yellow", zh: "é»ƒè‰²çš„", page: 27, topic: "é¡è‰²" },

            // Page 28: è¡£ç‰© (NEW)
            { en: "dress", zh: "æ´‹è£", page: 28, topic: "è¡£ç‰©" },
            { en: "hat", zh: "å¸½å­", page: 28, topic: "è¡£ç‰©" },
            { en: "jacket", zh: "å¤¾å…‹; å¤–å¥—", page: 28, topic: "è¡£ç‰©" },
            { en: "shirt", zh: "è¥¯è¡«", page: 28, topic: "è¡£ç‰©" },
            { en: "shoes", zh: "é‹å­", page: 28, topic: "è¡£ç‰©" },
            { en: "shorts", zh: "çŸ­è¤²", page: 28, topic: "è¡£ç‰©" },
            { en: "skirt", zh: "è£™å­", page: 28, topic: "è¡£ç‰©" },
            { en: "T-shirt", zh: "çŸ­è¢–é‹å‹•è¡«, çŸ­è¢–åœ“é ˜T", page: 28, topic: "è¡£ç‰©" },

            // Page 29: å½¢å®¹è© (ä¸€) (NEW)
            { en: "bad", zh: "ä¸å¥½çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "beautiful", zh: "ç¾éº—çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "big", zh: "å¤§çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "clean", zh: "ä¹¾æ·¨çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "cloudy", zh: "å¤šé›²çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "cold", zh: "å†·çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "cool", zh: "æ¶¼çˆ½çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "cute", zh: "å¯æ„›", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "fat", zh: "èƒ–çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "handsome", zh: "è‹±ä¿Šçš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },
            { en: "hot", zh: "ç†±çš„", page: 29, topic: "å½¢å®¹è© (ä¸€)" },

            // Page 30: å½¢å®¹è© (äºŒ) (NEW)
            { en: "long", zh: "é•·çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "new", zh: "æ–°çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "nice", zh: "ä¸éŒ¯çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "old", zh: "èˆŠçš„; è€çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "rainy", zh: "ä¸‹é›¨çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "short", zh: "çŸ­çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "small", zh: "å°çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "smart", zh: "è°æ˜çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "sunny", zh: "æ™´æœ—çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "tall", zh: "é«˜çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },
            { en: "thin", zh: "ç˜¦çš„", page: 30, topic: "å½¢å®¹è© (äºŒ)" },

            // Page 31: å½¢å®¹è©èˆ‡å‹•è© (NEW)
            { en: "warm", zh: "æº«æš–çš„", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "windy", zh: "æœ‰é¢¨çš„", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "am", zh: "æ˜¯", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "are", zh: "æ˜¯", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "close", zh: "é—œ", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "come", zh: "ä¾†", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "cook", zh: "ç…®", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "cut", zh: "åˆ‡", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "dance", zh: "è·³èˆ", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },
            { en: "draw", zh: "ç•«", page: 31, topic: "å½¢å®¹è©èˆ‡å‹•è©" },

            // Page 32: å‹•è©(ä¸€)
            { en: "drink", zh: "å–", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "eat", zh: "åƒ", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "fly", zh: "é£›", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "get up", zh: "èµ·åºŠ", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "go", zh: "å»", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "has", zh: "æœ‰", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "have", zh: "æœ‰", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "help", zh: "å¹«å¿™", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "is", zh: "æ˜¯", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "like", zh: "å–œæ­¡", page: 32, topic: "å‹•è©(ä¸€)" },
            { en: "listen", zh: "è½", page: 32, topic: "å‹•è©(ä¸€)" },

            // Page 33: å‹•è©(äºŒ)
            { en: "look", zh: "çœ‹", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "meet", zh: "é‡è¦‹", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "open", zh: "é–‹", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "play", zh: "ç©", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "read", zh: "é–±è®€", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "run", zh: "è·‘", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "see", zh: "çœ‹åˆ°", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "sing", zh: "å”±", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "sleep", zh: "ç¡", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "study", zh: "ç ”ç©¶", page: 33, topic: "å‹•è©(äºŒ)" },
            { en: "swim", zh: "æ¸¸æ³³", page: 33, topic: "å‹•è©(äºŒ)" },

            // Page 34: èª²å®¤è‹±èª(ä¸€)
            { en: "Good morning.", zh: "æ—©å®‰ã€‚", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            { en: "Good afternoon.", zh: "ä¸‹åˆå¥½ã€‚", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            { en: "How are you?", zh: "ä½ å¥½å—?", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            { en: "I am fine.", zh: "æˆ‘å¾ˆå¥½ã€‚", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            { en: "Stand up.", zh: "ç«™èµ·ä¾†ã€‚", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            { en: "Sit down.", zh: "åä¸‹ã€‚", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            { en: "Listen!", zh: "è½ï¼", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            { en: "Look!", zh: "çœ‹ï¼", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            { en: "Thank you. \nYou are welcome.", zh: "è¬è¬ä½ ã€‚ \nä¸å®¢æ°£ã€‚", page: 34, topic: "èª²å®¤è‹±èª(ä¸€)", isSentence: true },
            
            // Page 35: èª²å®¤è‹±èª(äºŒï¼‰
            { en: "Eyes on me.", zh: "è€å¸«: çœ¼ç›çœ‹æˆ‘ã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Eyes on you.", zh: "å­¸ç”Ÿ: çœ¼ç›çœ‹è€å¸«ã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Take out your book.", zh: "è€å¸«: æ‹¿å‡ºä½ çš„æ›¸ã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Take out my book.", zh: "å­¸ç”Ÿ: æ‹¿å‡ºæˆ‘çš„æ›¸ã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Open your book to page ________.", zh: "è€å¸«: æŠŠæ›¸ç¿»åˆ°ç¬¬ ______ é ã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Open my book.", zh: "å­¸ç”Ÿ: æ‰“é–‹æˆ‘çš„æ›¸ã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Close your book.", zh: "è€å¸«: æŠŠæ›¸é—”ä¸Šã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Close my book.", zh: "å­¸ç”Ÿ: æŠŠæˆ‘çš„æ›¸é—”ä¸Šã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Are you ready?", zh: "è€å¸«: ä½ æº–å‚™å¥½äº†å—?", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },
            { en: "Yes, I'm ready.", zh: "å­¸ç”Ÿ: æ˜¯çš„, æˆ‘æº–å‚™å¥½äº†ã€‚", page: 35, topic: "èª²å®¤è‹±èª(äºŒï¼‰", isSentence: true },

            // Page 36: èª²å®¤è‹±èª(ä¸‰ï¼‰
            { en: "Sorry, I'm late.", zh: "å­¸ç”Ÿ: å°ä¸èµ·, æˆ‘é²åˆ°äº†ã€‚", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            { en: "May I come in?", zh: "å­¸ç”Ÿ: æˆ‘å¯ä»¥é€²æ•™å®¤å—?", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            { en: "May I borrow your red pen?", zh: "å­¸ç”Ÿ: æˆ‘å¯ä»¥å€Ÿç”¨ä½ çš„ç´…ç­†å—?", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            { en: "Come here!", zh: "éä¾†é€™è£¡ã€‚", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            { en: "Try again.", zh: "å†è©¦ä¸€æ¬¡ã€‚", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            { en: "Good job!", zh: "åšå¾—å¥½!", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            { en: "Sit properly.", zh: "è€å¸«: åå¥½ã€‚", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            { en: "Sit properly.", zh: "å­¸ç”Ÿ: åå¥½ã€‚", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            { en: "Quiet, please.", zh: "è€å¸«: è«‹å®‰éœã€‚", page: 36, topic: "èª²å®¤è‹±èª(ä¸‰ï¼‰", isSentence: true },
            
            // Page 37: èª²å®¤è‹±èª(å››ï¼‰
            { en: "Here you are.", zh: "é€™çµ¦ä½ ã€‚", page: 37, topic: "èª²å®¤è‹±èª(å››ï¼‰", isSentence: true },
            { en: "Go back to your seat.", zh: "å›åˆ°ä½ çš„åº§ä½ã€‚", page: 37, topic: "èª²å®¤è‹±èª(å››ï¼‰", isSentence: true },
            { en: "Repeat after me.", zh: "è·Ÿæˆ‘é‡è¤‡ä¸€éã€‚", page: 37, topic: "èª²å®¤è‹±èª(å››ï¼‰", isSentence: true },
            { en: "Choose me, please.", zh: "è«‹é¸æˆ‘ã€‚", page: 37, topic: "èª²å®¤è‹±èª(å››ï¼‰", isSentence: true },
            { en: "Stop!", zh: "åœä¸‹ä¾†ï¼", page: 37, topic: "èª²å®¤è‹±èª(å››ï¼‰", isSentence: true },
            { en: "Show me your homework.", zh: "çµ¦æˆ‘çœ‹ä½ çš„ä½œæ¥­ã€‚", page: 37, topic: "èª²å®¤è‹±èª(å››ï¼‰", isSentence: true },
            { en: "See you.", zh: "å†è¦‹ï¼", page: 37, topic: "èª²å®¤è‹±èª(å››ï¼‰", isSentence: true },

            // Page 38: èª²å®¤è‹±èª(äº”ï¼‰
            { en: "Let's count. 1, 2, 3, 4, 5.", zh: "æˆ‘å€‘ä¸€èµ·æ•¸æ•¸çœ‹ã€‚ 1.2.3.4.5ã€‚", page: 38, topic: "èª²å®¤è‹±èª(äº”ï¼‰", isSentence: true },
            { en: "Put away your book.", zh: "æŠŠä½ çš„æ›¸æ”¶èµ·ä¾†ã€‚", page: 38, topic: "èª²å®¤è‹±èª(äº”ï¼‰", isSentence: true },
            { en: "Hurry up!", zh: "å¿«ä¸€é»ï¼", page: 38, topic: "èª²å®¤è‹±èª(äº”ï¼‰", isSentence: true },
            { en: "Wait, please!", zh: "è«‹ç­‰ä¸€ä¸‹ï¼", page: 38, topic: "èª²å®¤è‹±èª(äº”ï¼‰", isSentence: true },
            { en: "Stop!", zh: "åœä¸‹ä¾†ï¼", page: 38, topic: "èª²å®¤è‹±èª(äº”ï¼‰", isSentence: true },
            { en: "Nice to meet you. \nNice to meet you, too.", zh: "å¾ˆé«˜èˆˆèªè­˜ä½ ã€‚ \næˆ‘ä¹Ÿå¾ˆé«˜èˆˆèªè­˜ä½ ã€‚", page: 38, topic: "èª²å®¤è‹±èª(äº”ï¼‰", isSentence: true },
            { en: "Louder, please.", zh: "è«‹å¤§è²ä¸€é»ã€‚", page: 38, topic: "èª²å®¤è‹±èª(äº”ï¼‰", isSentence: true },

            // Page 39: ç¯€æ…¶
            { en: "Chinese New Year", zh: "è¾²æ›†æ–°å¹´", page: 39, topic: "ç¯€æ…¶" },
            { en: "Lantern Festival", zh: "å…ƒå®µç¯€", page: 39, topic: "ç¯€æ…¶" },
            { en: "Dragon Boat Festival", zh: "ç«¯åˆç¯€", page: 39, topic: "ç¯€æ…¶" },
            { en: "Moon Festival", zh: "ä¸­ç§‹ç¯€", page: 39, topic: "ç¯€æ…¶" },
            { en: "Halloween", zh: "è¬è–ç¯€", page: 39, topic: "ç¯€æ…¶" },
            { en: "Mother's Day", zh: "æ¯è¦ªç¯€", page: 39, topic: "ç¯€æ…¶" },
        ];

        // =========================================
        // 2. DOM å…ƒç´ é¸å–
        // =========================================
        const card = document.getElementById('flashcard');
        const cardInner = document.getElementById('card-inner');
        const englishText = document.getElementById('english-text');
        const chineseText = document.getElementById('chinese-text');
        const speakBtn = document.getElementById('speak-btn');
        const flipBtn = document.getElementById('flip-btn');
        const prevBtn = document.getElementById('card-prev-button');
        const nextBtn = document.getElementById('card-next-button');
        
        // é é¢ä¸‹æ‹‰é¸å–®
        const dropdownButton = document.getElementById('pageDropdownButton');
        const dropdownContent = document.getElementById('pageDropdownContent');
        const dropdownList = document.getElementById('dropdownList');
        const selectedPageText = document.getElementById('selectedPageText');
        const dropdownArrow = document.getElementById('dropdownArrow');
        const dropdownOverlay = document.getElementById('dropdownOverlay');

        // A-Z æœ—è®€
        const alphabetBtnContainer = document.getElementById('alphabet-btn-container');
        const alphabetStartBtn = document.getElementById('alphabet-start-btn');
        const alphabetControls = document.getElementById('alphabet-controls');
        const alphabetPauseBtn = document.getElementById('alphabet-pause-btn');
        const alphabetStopBtn = document.getElementById('alphabet-stop-btn');
        const stdControlGrid = document.getElementById('std-control-grid');
        const pauseBtnText = document.getElementById('pause-btn-text');

        // AI ä¾‹å¥
        const sentenceBtn = document.getElementById('ai-sentence-btn');
        const sentenceBox = document.getElementById('sentenceBox');
        const sentenceContainer = sentenceBtn.parentElement;

        // =========================================
        // 3. ç‹€æ…‹è®Šæ•¸
        // =========================================
        let currentPage = 1; // ç›®å‰é ç¢¼ (ä¾‹å¦‚: 1)
        let cardsInCurrentPage = []; // ç•¶å‰é é¢çš„æ‰€æœ‰å¡ç‰‡
        let currentCardIndexOnPage = 0; // åœ¨ç•¶å‰é é¢ä¸­çš„ç´¢å¼• (ä¾‹å¦‚: 0)
        let currentCardIndex = 0; // åœ¨ `flashcards` ç¸½é™£åˆ—ä¸­çš„ç´¢å¼•
        let isFlipped = false;
        let isDropdownOpen = false;

        // å­—æ¯æœ—è®€ç‹€æ…‹
        let isAlphabetReading = false;
        let isAlphabetPaused = false;
        let alphabetIndex = 0; // A-Z (0-25)
        let alphabetUtterance = null; // ç”¨æ–¼å„²å­˜ç›®å‰çš„èªéŸ³å¯¦ä¾‹ï¼Œä»¥ä¾¿æš«åœ/åœæ­¢
        const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');

        // =========================================
        // 4. ä¸‹æ‹‰é¸å–®ç›¸é—œåŠŸèƒ½
        // =========================================

        function populateDropdown() {
            dropdownList.innerHTML = '';
            const pages = {};
            // æ•´ç†æ¯ä¸€é çš„è³‡è¨Š
            flashcards.forEach(card => {
                if (!pages[card.page]) {
                    pages[card.page] = {
                        topic: card.topic,
                        count: 0
                    };
                }
                pages[card.page].count++;
            });

            // ç”¢ç”Ÿé¸å–®é …ç›®
            Object.keys(pages).forEach(pageNumber => {
                const pageInfo = pages[pageNumber];
                const item = document.createElement('a');
                item.href = '#';
                item.className = 'block px-4 py-3 text-base font-bold text-purple-700 hover:bg-purple-100 transition-colors';
                
                // åˆ¤æ–·æ˜¯å¦ç‚ºç›®å‰é¸ä¸­çš„é é¢
                if (parseInt(pageNumber) === currentPage) {
                    item.className = 'block px-4 py-3 text-base font-bold bg-purple-100 text-purple-900';
                }

                item.dataset.page = pageNumber;
                
                // é¡¯ç¤º icon
                const icon = pageInfo.topic.includes("å­—æ¯") ? "type" : 
                             pageInfo.topic.includes("å•å€™èª") || pageInfo.topic.includes("ç”¨èª") ? "message-square" :
                             pageInfo.topic.includes("å®¶äºº") ? "users" :
                             pageInfo.topic.includes("å­¸ç”¨å“") ? "pencil" :
                             pageInfo.topic.includes("å¥å‹") || pageInfo.topic.includes("éŸ»æ–‡") ? "book-open-check" :
                             pageInfo.topic.includes("èº«é«”") ? "accessibility" :
                             pageInfo.topic.includes("é£Ÿç‰©") ? "utensils" :
                             pageInfo.topic.includes("å‹•ç‰©") ? "cat" :
                             pageInfo.topic.includes("æ•¸å­—") ? "hash" :
                             pageInfo.topic.includes("åœ°æ–¹") ? "map-pin" :
                             pageInfo.topic.includes("é¡è‰²") ? "palette" :
                             pageInfo.topic.includes("è¡£ç‰©") ? "shirt" :
                             pageInfo.topic.includes("å½¢å®¹è©") ? "sparkles" :
                             pageInfo.topic.includes("å‹•è©") ? "run" :
                             pageInfo.topic.includes("ç¯€æ…¶") ? "cake" :
                             "book-open";

                item.innerHTML = `<i data-lucide="${icon}" class="inline-block w-5 h-5 mr-2 -mt-1 text-purple-400"></i> Page ${pageNumber}: ${pageInfo.topic}`;
                
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const newPage = parseInt(e.currentTarget.dataset.page);
                    if (newPage !== currentPage) {
                        // å¦‚æœåœ¨ A-Z æœ—è®€ä¸­åˆ‡æ›é é¢ï¼Œå‰‡åœæ­¢æœ—è®€
                        if (isAlphabetReading) {
                            stopAlphabetReading();
                        }
                        navigateToPage(newPage);
                    }
                    toggleDropdown(false);
                });
                dropdownList.appendChild(item);
            });
            // é‡æ–°æ¸²æŸ“ Lucide åœ–æ¨™
            lucide.createIcons();
        }

        function toggleDropdown(forceState) {
            isDropdownOpen = (forceState !== undefined) ? forceState : !isDropdownOpen;
            
            if (isDropdownOpen) {
                dropdownContent.classList.remove('hidden');
                dropdownContent.classList.add('fade-in');
                dropdownOverlay.classList.remove('hidden');
                dropdownArrow.style.transform = 'rotate(180deg)';
                // æ»¾å‹•åˆ°ç›®å‰é¸ä¸­çš„é …ç›®
                const selectedItem = dropdownList.querySelector(`[data-page="${currentPage}"]`);
                if (selectedItem) {
                    selectedItem.scrollIntoView({ block: 'nearest' });
                }
            } else {
                dropdownContent.classList.add('hidden');
                dropdownContent.classList.remove('fade-in');
                dropdownOverlay.classList.add('hidden');
                dropdownArrow.style.transform = 'rotate(0deg)';
            }
        }

        // =========================================
        // 5. æ ¸å¿ƒå¡ç‰‡åŠŸèƒ½
        // =========================================

        function navigateToPage(pageNumber) {
            currentPage = pageNumber;
            // æ‰¾åˆ°é€™é çš„ç¬¬ä¸€å¼µå¡ç‰‡åœ¨ç¸½é™£åˆ—ä¸­çš„ç´¢å¼•
            currentCardIndex = flashcards.findIndex(card => card.page === currentPage);
            if (currentCardIndex === -1) {
                console.error(`Page ${pageNumber} not found.`);
                return;
            }
            // æ›´æ–°ç•¶å‰é é¢å¡ç‰‡é™£åˆ—
            cardsInCurrentPage = flashcards.filter(card => card.page === currentPage);
            currentCardIndexOnPage = 0;
            
            updateCardContent();
            updateDropdownSelection();
        }

        function changeCard(direction) {
            // 1. è¨ˆç®—åœ¨ç•¶å‰é é¢ä¸­çš„æ–°ç´¢å¼•
            let newIndexOnPage = currentCardIndexOnPage + direction;

            // 2. è™•ç†é é¢åˆ‡æ›
            if (newIndexOnPage < 0) {
                // å¾€å‰ç¿»ï¼Œåˆ‡åˆ°ä¸Šä¸€é 
                const newPage = currentPage > 1 ? currentPage - 1 : flashcards[flashcards.length - 1].page; // å¾ªç’°åˆ°æœ€å¾Œä¸€é 
                navigateToPage(newPage);
                // åˆ‡åˆ°ä¸Šä¸€é çš„æœ€å¾Œä¸€å¼µå¡
                currentCardIndexOnPage = cardsInCurrentPage.length - 1;
                currentCardIndex = flashcards.findIndex(card => card.page === newPage) + currentCardIndexOnPage;

            } else if (newIndexOnPage >= cardsInCurrentPage.length) {
                // å¾€å¾Œç¿»ï¼Œåˆ‡åˆ°ä¸‹ä¸€é 
                const maxPage = flashcards[flashcards.length - 1].page;
                const newPage = currentPage < maxPage ? currentPage + 1 : 1; // å¾ªç’°åˆ°ç¬¬ä¸€é 
                navigateToPage(newPage);
                // navigateToPage å·²ç¶“é‡è¨­ currentCardIndexOnPage = 0;

            } else {
                // 3. åƒ…åœ¨ç•¶å‰é é¢å…§åˆ‡æ›
                currentCardIndexOnPage = newIndexOnPage;
                currentCardIndex += direction;
            }

            // 4. æ›´æ–°å¡ç‰‡å…§å®¹
            updateCardContent();
        }
        
        // ğŸ§  ä¸»å‡½å¼ï¼šè‡ªå‹•ç”¢ç”Ÿå°å­¸ç”Ÿç¨‹åº¦è‹±æ–‡å¥å­
        async function generateSimpleSentence(word, partOfSpeech = "noun") {
          try {
            // ç¾éšæ®µå…ˆä½¿ç”¨æœ¬åœ°æ¨¡æ¿ï¼ˆå°å­¸ç”Ÿé©ç”¨ï¼‰
            return localSentenceTemplate(word, partOfSpeech);
          } catch (error) {
            console.error(error);
            return localSentenceTemplate(word, partOfSpeech);
          }
        }

        // ğŸ“š NEW HELPER: è™•ç† a/an
        function getArticle(word) {
            if (!word) return 'a';
            const firstLetter = word.trim().toLowerCase().charAt(0);
            return ['a', 'e', 'i', 'o', 'u'].includes(firstLetter) ? 'an' : 'a';
        }

        // ğŸ“š å°å­¸ç”Ÿç­‰ç´šå¥å‹æ¨¡æ¿ï¼ˆä¿®æ­£æ–‡æ³•èˆ‡é‚è¼¯éŒ¯èª¤ï¼‰
        function localSentenceTemplate(word, pos) {
          // è™•ç†ç‰‡èªæˆ–å¥å­ (ä¾‹å¦‚ Good morning)
          if (pos === 'phrase' || pos === 'sentence') {
            return `"${word}" æ˜¯ä¸€å€‹å¾ˆæ£’çš„å¥å­ï¼`;
          }

          // 0. ç‰¹æ®Šå‹•è©è™•ç† (ä¿®æ­£é‚è¼¯éŒ¯èª¤)
          // é€™äº›å‹•è©ä¸é©ç”¨ "I can ${w}" æˆ– "I like to ${w}" æ¨¡æ¿
          const specialVerbs = {
            // Page 31
            'am': ["I am a student.", "I am happy."],
            'are': ["We are friends.", "They are tall."],
            'close': ["Close the door.", "Close your book."],
            'come': ["Come here, please.", "Come in."],
            'cut': ["I cut the paper.", "She can cut the apple."],
            // Page 32
            'get up': ["I get up at 7.", "He gets up early."],
            'has': ["He has a book.", "She has a pen."],
            'have': ["I have a dog.", "They have a ball."],
            'is': ["He is a boy.", "She is a girl.", "It is a cat."],
            'like': ["I like dogs.", "She likes apples.", "He likes to read."], // ä¿®æ­£ï¼šåŠ å…¥ like
            'listen': ["Listen to the music.", "I listen to the teacher."],
            // Page 33
            'look': ["Look at the cat.", "I look at the book."],
            'meet': ["Nice to meet you.", "I meet my friend."], // ä¿®æ­£ï¼šåŠ å…¥ meet
            'open': ["Open the book.", "I open the door."], // ä¿®æ­£ï¼šåŠ å…¥ open
            'see': ["I see a bird.", "I see a pen.", "Can you see me?"] // ä¿®æ­£ï¼šåŠ å…¥ see
          };

          // *** ä¿®æ­£ï¼šç§»é™¤æ­¤è™•å¤šé¤˜çš„ç¨‹å¼ç¢¼ ***
          
          // 1. è©æ€§æ¨¡æ¿
          const templates = {
            'noun': [
              (w) => `I have ${getArticle(w)} ${w}. (æˆ‘æœ‰${getArticle(w)} ${w}ã€‚)`,
              (w) => `I see ${getArticle(w)} ${w}. (æˆ‘çœ‹åˆ°${getArticle(w)} ${w}ã€‚)`,
              (w) => `It is ${getArticle(w)} ${w}. (å®ƒæ˜¯${getArticle(w)} ${w}ã€‚)`,
              (w) => `I like this ${w}. (æˆ‘å–œæ­¡é€™å€‹${w}ã€‚)`,
              (w) => `Look at the ${w}. (çœ‹é‚£å€‹${w}ã€‚)`
            ],
            'verb': [
              (w) => `I can ${w}. (æˆ‘æœƒ${w}ã€‚)`,
              (w) => `Let's ${w}. (æˆ‘å€‘ä¾†${w}å§ã€‚)`,
              (w) => `I like to ${w}. (æˆ‘å–œæ­¡${w}ã€‚)`
            ],
            'adj': [
              // ä¿®æ­£ï¼šç§»é™¤ "He is", "She is", "The cat is" ç­‰ä¸å®‰å…¨çš„æ¨¡æ¿
              (w) => `It is ${w}. (å®ƒæ˜¯${w}çš„ã€‚)`,
              (w) => `Look, it is ${w}! (çœ‹ï¼Œå®ƒæ˜¯${w}çš„ï¼)`,
              (w) => `That is ${w}. (é‚£æ˜¯${w}çš„ã€‚)`,
              (w) => `It looks ${w}. (å®ƒçœ‹èµ·ä¾†${w}ã€‚)`,
              (w) => `This is ${w}. (é€™æ˜¯${w}çš„ã€‚)`
            ],
            'color': [ // Page 26, 27 å°ˆç”¨
              (w) => {
                const nouns = ['hat', 'pen', 'book', 'cat', 'bag']; // éš¨æ©Ÿåè©
                const noun = nouns[Math.floor(Math.random() * nouns.length)];
                return `I have ${getArticle(w)} ${w} ${noun}. (æˆ‘æœ‰${getArticle(w)} ${w}çš„${noun}ã€‚)`;
              },
              (w) => `It is ${w}. (å®ƒæ˜¯${w}è‰²çš„ã€‚)`,
              (w) => `My book is ${w}. (æˆ‘çš„æ›¸æ˜¯${w}è‰²çš„ã€‚)`,
              (w) => `I like ${w}. (æˆ‘å–œæ­¡${w}è‰²ã€‚)`
            ]
          };

          // 2. é¸æ“‡æ¨¡æ¿ (å¦‚æœä¸æ˜¯ç‰¹æ®Šå‹•è©)
          let pool;
          // æª¢æŸ¥æ˜¯å¦ç‚ºç‰¹æ®Šå‹•è©
          if (pos === 'verb' && specialVerbs[word]) {
             pool = specialVerbs[word].map(sentence => () => sentence); // è½‰æ›ç‚ºå‡½æ•¸
          } else if (pos === 'noun' && (word === 'black' || word === 'blue' || word === 'brown' || word === 'color' || word === 'green' || word === 'orange' || word === 'pink' || word === 'purple' || word === 'red' || word === 'white' || word === 'yellow')) {
             pool = templates['color'];
          } else {
             pool = templates[pos] || templates["noun"];
          }

          // éš¨æ©Ÿé¸ä¸€å€‹ "æ¨¡æ¿å‡½æ•¸"
          const templateFunction = pool[Math.floor(Math.random() * pool.length)];
          
          // 3. åŸ·è¡Œå‡½æ•¸ä¾†ç”¢ç”Ÿå¥å­
          let sentence = templateFunction(word);

          // 4. è®“å¥é¦–ä¿æŒå¤§å¯«
          sentence = sentence.charAt(0).toUpperCase() + sentence.slice(1);
          
          // 5. è™•ç† Page 31 çš„ 'warm' å’Œ 'windy' (å½¢å®¹è©è¢«èª¤åˆ¤)
          if (word === 'warm' || word === 'windy') {
             const adjTemplates = templates['adj'];
             const adjFunc = adjTemplates[Math.floor(Math.random() * adjTemplates.length)];
             sentence = adjFunc(word).charAt(0).toUpperCase() + adjFunc(word).slice(1);
          }
          
          return sentence;
        }

        // è¼”åŠ©å‡½æ•¸ï¼šå¾ä¸»é¡Œæ¨æ–·è©æ€§
        function getPartOfSpeechFromTopic(topic) {
            if (!topic) return 'noun';
            if (topic.includes('å‹•è©')) return 'verb';
            if (topic.includes('å½¢å®¹è©')) return 'adj';
            // ä¿®æ­£ï¼šPage 26/27 é¡è‰²åˆ¤æ–· (é›–ç„¶å·²åœ¨ localSentenceTemplate è™•ç†ï¼Œä½†ä¿ç•™)
            if (topic.includes('é¡è‰²')) return 'color'; 
            if (topic.includes('å¥å‹') || topic.includes('ç”¨èª') || topic.includes('éŸ»æ–‡') || topic.includes('ç¯€æ…¶')) return 'sentence';
            return 'noun'; // é è¨­ç‚ºåè©
        }

        // ğŸ® æŒ‰éˆ•è§¸ç™¼
        async function onClickSentenceButton() {
          const btn = document.getElementById('ai-sentence-btn');
          const sentenceBox = document.getElementById('sentenceBox');
          
          btn.disabled = true;
          sentenceBox.innerText = 'AI è€å¸«æ€è€ƒä¸­...';

          try {
            const currentCard = flashcards[currentCardIndex];
            
            // æª¢æŸ¥æ˜¯å¦ç¦æ­¢AI
            if (currentCard.noGemini) {
                sentenceBox.innerText = 'é€™å€‹é é¢æ²’æœ‰ä¾‹å¥å–”ï¼';
                btn.disabled = false;
                return;
            }

            // å–å¾—å–®å­—å’Œè©æ€§
            // .split('\n')[0] ç¢ºä¿åªå–å¤šè¡Œè‹±æ–‡çš„ç¬¬ä¸€è¡Œ (ä¾‹å¦‚ "How are you?")
            const word = (currentCard.tts_en || currentCard.en).split('\n')[0]; 
            // ä¿®æ­£ï¼šPage 26/27 å‚³é 'color' è©æ€§
            let pos;
            if (currentCard.page === 26 || currentCard.page === 27) {
                pos = 'color';
            } else {
                pos = getPartOfSpeechFromTopic(currentCard.topic);
            }
            
            // æ¨¡æ“¬ä¸€é»å»¶é²
            await new Promise(resolve => setTimeout(resolve, 300));

            const sentence = await generateSimpleSentence(word.toLowerCase(), pos);
            sentenceBox.innerText = sentence;

          } catch (error) {
            console.error("Sentence generation error:", error);
            sentenceBox.innerText = 'å–”å–”ï¼Œé€ å¥å¤±æ•—äº†ã€‚';
          } finally {
            btn.disabled = false;
          }
        }

        function updateCardContent() {
            const currentCard = flashcards[currentCardIndex];
            if (!currentCard) return;

            // 1. é‡ç½®å¡ç‰‡ç¿»è½‰ç‹€æ…‹
            if (isFlipped) {
                card.classList.remove('is-flipped');
                isFlipped = false;
            }

            // 2. æ›´æ–°æ–‡å­—
            englishText.textContent = currentCard.en;
            chineseText.textContent = currentCard.zh;

            // 3. æ ¹æ“šå…§å®¹èª¿æ•´å­—é«”å¤§å°
            englishText.className = 'card-text-normal text-center break-words max-w-full'; // é‡ç½®
            chineseText.className = 'card-text-normal font-bold text-center break-words max-w-full'; // é‡ç½®
            
            if (currentCard.isLetter) {
                englishText.classList.add('card-text-jumbo');
                chineseText.classList.add('card-text-jumbo');
            } else if (currentCard.isSentence || currentCard.en.length > 20) {
                englishText.classList.add('card-text-sentence');
                chineseText.classList.add('card-text-sentence');
            } else if (currentCard.isPhrase) {
                englishText.classList.add('card-text-phrase');
                chineseText.classList.add('card-text-phrase');
            }

            // 4. æ›´æ–°æœ—è®€æŒ‰éˆ•ç‹€æ…‹
            speakBtn.disabled = !!currentCard.noTts;

            // 5. è™•ç† A-Z é é¢ (Page 4) çš„ UI
            if (currentCard.isAlphabetReview) {
                alphabetBtnContainer.style.display = 'block';
                stdControlGrid.style.display = 'none'; // éš±è—æ¨™æº–æŒ‰éˆ•
                // å¦‚æœæ­£åœ¨æœ—è®€ï¼Œé¡¯ç¤ºæ§åˆ¶é …
                if (isAlphabetReading) {
                    alphabetStartBtn.style.display = 'none';
                    alphabetControls.style.display = 'flex';
                } else {
                    alphabetStartBtn.style.display = 'block';
                    alphabetControls.style.display = 'none';
                }
            } else {
                alphabetBtnContainer.style.display = 'none';
                stdControlGrid.style.display = 'grid'; // é¡¯ç¤ºæ¨™æº–æŒ‰éˆ•
            }

            // 6. æ›´æ–° AI ä¾‹å¥å€å¡Š
            if (currentCard.noGemini) {
                sentenceContainer.style.display = 'none';
            } else {
                sentenceContainer.style.display = 'block';
                sentenceBox.innerText = 'é»æ“Šä¸Šæ–¹æŒ‰éˆ•é€ å¥';
                sentenceBtn.disabled = false;
            }

            // 7. ä¿®æ­£ç¿»è½‰æŒ‰éˆ•é‚è¼¯
            flipBtn.disabled = isAlphabetReading; // åƒ…åœ¨A-Zæœ—è®€æ’­æ”¾ä¸­ç¦ç”¨
        }

        function updateDropdownSelection() {
            const currentCard = flashcards[currentCardIndex];
            selectedPageText.innerHTML = `<i data-lucide="book-open" class="inline-block w-5 h-5 mr-1 -mt-1 text-purple-500"></i> Page ${currentCard.page}: ${currentCard.topic}`;
            lucide.createIcons(); // æ›´æ–° icon
            // æ›´æ–°ä¸‹æ‹‰é¸å–®ä¸­çš„é«˜äº®
            populateDropdown();
        }

        // =========================================
        // 6. èªéŸ³æœ—è®€åŠŸèƒ½ (Web Speech API)
        // =========================================
        function speak(text) {
            if (isAlphabetReading) {
                // å¦‚æœæ­£åœ¨æœ—è®€ A-Zï¼Œå‰‡åœæ­¢å®ƒ
                stopAlphabetReading();
            }

            // åœæ­¢ä»»ä½•æ­£åœ¨æ’­æ”¾çš„èªéŸ³
            window.speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
        }

        function handleSpeakButtonClick() {
            const currentCard = flashcards[currentCardIndex];
            const textToSpeak = currentCard.tts_en || currentCard.en;
            speak(textToSpeak);
        }

        // =========================================
        // 7. A-Z å­—æ¯æœ—è®€åŠŸèƒ½
        // =========================================
        function startAlphabetReading() {
            if (isAlphabetReading) return; // é˜²æ­¢é‡è¤‡å•Ÿå‹•

            isAlphabetReading = true;
            isAlphabetPaused = false;
            alphabetIndex = 0; // å¾ A é–‹å§‹

            // æ›´æ–° UI
            alphabetStartBtn.style.display = 'none';
            alphabetControls.style.display = 'flex';
            pauseBtnText.textContent = 'æš«åœ';

            // ç¦ç”¨é é¢åˆ‡æ›
            disableNavigation(true);

            // é–‹å§‹æœ—è®€å¾ªç’°
            speakNextLetter();
        }

        function speakNextLetter() {
            if (!isAlphabetReading) return; // å·²è¢«åœæ­¢
            if (isAlphabetPaused) return; // å·²è¢«æš«åœ

            if (alphabetIndex >= alphabet.length) {
                // æœ—è®€å®Œç•¢
                stopAlphabetReading();
                return;
            }

            const letter = alphabet[alphabetIndex];
            
            // *** ä¿®æ­£ï¼šç›´æ¥åœ¨ç¬¬å››é æ›´æ–°å¡ç‰‡å…§å®¹ ***
            englishText.textContent = letter;
            chineseText.textContent = letter.toLowerCase();
            // å¼·åˆ¶è¨­å®šç‚ºå­—æ¯å¡æ¨£å¼
            englishText.className = 'card-text-jumbo text-center break-words max-w-full';
            chineseText.className = 'card-text-jumbo font-bold text-center break-words max-w-full';
            // ç¢ºä¿å¡ç‰‡æ˜¯æ­£é¢
            if (isFlipped) {
                card.classList.remove('is-flipped');
                isFlipped = false;
            }
            // *** ä¿®æ­£çµæŸ ***

            alphabetUtterance = new SpeechSynthesisUtterance(letter);
            alphabetUtterance.lang = 'en-US';
            alphabetUtterance.rate = 0.8;
            
            alphabetUtterance.onend = () => {
                // æœ—è®€çµæŸå¾Œï¼Œç­‰å¾…ä¸€å°æ®µæ™‚é–“å†å¿µä¸‹ä¸€å€‹
                setTimeout(() => {
                    alphabetIndex++;
                    speakNextLetter();
                }, 500); // å­—æ¯é–“éš” 0.5 ç§’
            };

            alphabetUtterance.onerror = (e) => {
                console.error("SpeechSynthesis Error:", e);
                stopAlphabetReading(); // ç™¼ç”ŸéŒ¯èª¤æ™‚åœæ­¢
            };

            window.speechSynthesis.speak(alphabetUtterance);
        }

        function pauseAlphabetReading() {
            if (!isAlphabetReading) return;

            isAlphabetPaused = !isAlphabetPaused; // åˆ‡æ›æš«åœç‹€æ…‹

            if (isAlphabetPaused) {
                // æš«åœ
                window.speechSynthesis.pause();
                pauseBtnText.textContent = 'ç¹¼çºŒ';
                // *** ä¿®æ­£ï¼šæš«åœæ™‚å…è¨±åˆ‡æ›é é¢ ***
                disableNavigation(false); 
            } else {
                // ç¹¼çºŒ
                pauseBtnText.textContent = 'æš«åœ';
                // *** ä¿®æ­£ï¼šç¹¼çºŒæ™‚ç¦æ­¢åˆ‡æ›é é¢ ***
                disableNavigation(true); 
                // æª¢æŸ¥æ˜¯å¦æ˜¯å¾æš«åœç‹€æ…‹æ¢å¾©
                if (window.speechSynthesis.paused) {
                    window.speechSynthesis.resume();
                } else {
                    // å¦‚æœä¸æ˜¯ï¼Œè¡¨ç¤º onend å›èª¿å·²åœæ­¢ï¼Œéœ€æ‰‹å‹•å•Ÿå‹•ä¸‹ä¸€å€‹
                    speakNextLetter();
                }
            }
        }

        function stopAlphabetReading() {
            isAlphabetReading = false;
            isAlphabetPaused = false;
            alphabetIndex = 0;
            
            if (alphabetUtterance) {
                alphabetUtterance.onend = null; // ç§»é™¤å›èª¿é˜²æ­¢éŒ¯èª¤
                alphabetUtterance = null;
            }
            window.speechSynthesis.cancel(); // åœæ­¢æ‰€æœ‰èªéŸ³

            // æ¢å¾© UI
            alphabetStartBtn.style.display = 'block';
            alphabetControls.style.display = 'none';
            pauseBtnText.textContent = 'æš«åœ';

            // å•Ÿç”¨é é¢åˆ‡æ›
            disableNavigation(false);

            // æ¢å¾© Page 4 çš„åŸå§‹å¡ç‰‡å…§å®¹
            if (currentPage === 4) {
                updateCardContent();
            }
        }
        
        // è¼”åŠ©å‡½æ•¸ï¼šç¦ç”¨/å•Ÿç”¨å°è¦½
        function disableNavigation(disabled) {
            prevBtn.disabled = disabled;
            nextBtn.disabled = disabled;
            dropdownButton.disabled = disabled;

            // *** ä¿®æ­£ï¼šåªæœ‰åœ¨éæš«åœç‹€æ…‹ä¸‹æ‰é–å®š ***
            if (isAlphabetPaused) {
                 prevBtn.disabled = false;
                 nextBtn.disabled = false;
                 dropdownButton.disabled = false;
            }
        }
        
        // =========================================
        // 8. äº‹ä»¶ç›£è½å™¨
        // =========================================
        
        // ç¿»è½‰
        card.addEventListener('click', () => {
            const currentCard = flashcards[currentCardIndex];
            // ä¿®æ­£ï¼šåƒ…åœ¨A-Zæœ—è®€ä¸­ä¸ç¿»è½‰ï¼Œä¸€èˆ¬çš„å­—æ¯å¡(P5-12)æ‡‰è©²è¦èƒ½ç¿»è½‰
            if (isAlphabetReading) return; 
            
            isFlipped = !isFlipped;
            card.classList.toggle('is-flipped');
        });
        flipBtn.addEventListener('click', (e) => {
             e.stopPropagation(); // é˜²æ­¢è§¸ç™¼å¡ç‰‡é»æ“Š
             isFlipped = !isFlipped;
             card.classList.toggle('is-flipped');
        });

        // æœ—è®€
        speakBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // é˜²æ­¢è§¸ç™¼å¡ç‰‡é»æ“Š
            handleSpeakButtonClick();
        });

        // åˆ‡æ›å¡ç‰‡
        prevBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (isAlphabetReading) stopAlphabetReading(); // å¦‚æœåœ¨A-Zæœ—è®€ä¸­æŒ‰äº†ï¼Œå°±åœæ­¢
            changeCard(-1);
        });
        nextBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (isAlphabetReading) stopAlphabetReading(); // å¦‚æœåœ¨A-Zæœ—è®€ä¸­æŒ‰äº†ï¼Œå°±åœæ­¢
            changeCard(1);
        });

        // ä¸‹æ‹‰é¸å–®
        dropdownButton.addEventListener('click', () => toggleDropdown());
        dropdownOverlay.addEventListener('click', () => toggleDropdown(false));

        // A-Z æœ—è®€
        alphabetStartBtn.addEventListener('click', startAlphabetReading);
        alphabetPauseBtn.addEventListener('click', pauseAlphabetReading);
        alphabetStopBtn.addEventListener('click', stopAlphabetReading);

        // AI ä¾‹å¥
        sentenceBtn.addEventListener('click', onClickSentenceButton);

        // éµç›¤å·¦å³éµ
        document.addEventListener('keydown', (e) => {
            if (isDropdownOpen) return; // ä¸‹æ‹‰é¸å–®é–‹å•Ÿæ™‚ä¸è§¸ç™¼
            
            if (e.key === 'ArrowLeft') {
                if (isAlphabetReading) stopAlphabetReading();
                changeCard(-1);
            } else if (e.key === 'ArrowRight') {
                if (isAlphabetReading) stopAlphabetReading();
                changeCard(1);
            }
        });

        // =========================================
        // 9. åˆå§‹åŒ–
        // =========================================
        function init() {
            // é è¨­è¼‰å…¥ Page 1
            navigateToPage(1);
        }

        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>